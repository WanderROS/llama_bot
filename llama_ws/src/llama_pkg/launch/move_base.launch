<?xml version="1.0"?>
<launch>

    <arg name="use_dijkstra" default= "true"/> 
    <arg name="move_forward_only" default="false"/>

    <!-- https://index.ros.org/p/move_base/github-ros-planning-navigation/#noetic -->
    <node pkg="move_base" type="move_base" name="move_base" output="screen">
        <!-- use global_planner replace default navfn as global planner ,global_planner support A* and dijkstra algorithm-->
        <param name="base_global_planner" value="global_planner/GlobalPlanner"/>
        <param name="base_local_planner" value="dwa_local_planner/DWAPlannerROS" />
        <!-- <rosparam file="$(find robot_navigation)/param/NanoRobot/global_planner_params.yaml" command="load" /> -->
        <rosparam file="$(find llama_pkg)/config/robot/costmap_common_params.yaml" command="load" ns="global_costmap" />
        <rosparam file="$(find llama_pkg)/config/robot/costmap_common_params.yaml" command="load" ns="local_costmap" />
        <rosparam file="$(find llama_pkg)/config/robot/local_costmap_params.yaml" command="load" />
        <rosparam file="$(find llama_pkg)/config/robot/global_costmap_params.yaml" command="load" />
        <rosparam file="$(find llama_pkg)/config/robot/move_base_params.yaml" command="load" />
        <rosparam file="$(find llama_pkg)/config/robot/dwa_local_planner_params.yaml" command="load" />
        <param name="DWAPlannerROS/min_vel_x" value="0.0" if="$(arg move_forward_only)" />
        <!--default is True,use dijkstra algorithm;set to False,usd A* algorithm-->
        <param name="GlobalPlanner/use_dijkstra " value="$(arg use_dijkstra)" /> 
    </node>

    <node pkg="map_server" type="map_server" name="map_server" args="$(find llama_pkg)/map/map.yaml"/>
    <node pkg="amcl" type="amcl" name="amcl"/>
</launch>